os.loadAPI("apis/net")

local AmberServer = {}
AmberServer.__index = AmberServer
AmberServer.new = function(data)
	return setmetatable({server = data.server or "amber://"}, AmberServer)
end
AmberServer.bindPackage = function(self, packageId)
	net.sendMessage(self.server, "downloadPackage", packageId)
	-- This assumes we're running a parallel message loop (or that the caller doesn't mind losing other events).
	return net.pullMessage("packageDownload")
end

return AmberServer